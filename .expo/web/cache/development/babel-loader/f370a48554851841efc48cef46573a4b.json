{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nvar _jsxFileName = \"/Users/valentin/Documents/Proyects/pruebas/ReactNative/CUCEIEats/TEAM-SELLER/screens/EditProduct.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect, useCallback, useReducer } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport KeyboardAvoidingView from \"react-native-web/dist/exports/KeyboardAvoidingView\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport CheckBox from \"react-native-web/dist/exports/CheckBox\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Switch from \"react-native-web/dist/exports/Switch\";\nimport { HeaderButtons, Item } from \"react-navigation-header-buttons\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport ImagePicker from \"../components/ImagePicker\";\nimport HeaderButton from \"../components/UI/HeaderButton\";\nimport * as productsActions from \"../store/actions/products\";\nimport Input from \"../components/UI/Input\";\nimport Colors from \"../constants/Colors\";\nvar FORM_INPUT_UPDATE = \"FORM_INPUT_UPDATE\";\n\nvar FilterSwitch = function FilterSwitch(props) {\n  return React.createElement(View, {\n    style: styles.filterContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 5\n    }\n  }, React.createElement(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 7\n    }\n  }, props.label), React.createElement(Switch, {\n    trackColor: {\n      true: Colors.primaryColor\n    },\n    thumbColor: Platform.OS === \"android\" ? Colors.primaryColor : \"\",\n    value: props.state,\n    onValueChange: props.onChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 7\n    }\n  }));\n};\n\nvar formReducer = function formReducer(state, action) {\n  if (action.type === FORM_INPUT_UPDATE) {\n    var updatedValues = _objectSpread(_objectSpread({}, state.inputValues), {}, _defineProperty({}, action.input, action.value));\n\n    var updatedValidities = _objectSpread(_objectSpread({}, state.inputValidities), {}, _defineProperty({}, action.input, action.isValid));\n\n    var updatedFormIsValid = true;\n\n    for (var key in updatedValidities) {\n      updatedFormIsValid = updatedFormIsValid && updatedValidities[key];\n    }\n\n    return {\n      formIsValid: updatedFormIsValid,\n      inputValidities: updatedValidities,\n      inputValues: updatedValues\n    };\n  }\n\n  return state;\n};\n\nvar EditProductScreen = function EditProductScreen(props) {\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isLoading = _useState2[0],\n      setIsLoading = _useState2[1];\n\n  var _useState3 = useState(true),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isAvailable = _useState4[0],\n      setIsAvailable = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      isGlutenFree = _useState6[0],\n      setIsGlutenFree = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      isLactoseFree = _useState8[0],\n      setIsLactoseFree = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      isVegan = _useState10[0],\n      setIsVegan = _useState10[1];\n\n  var _useState11 = useState(false),\n      _useState12 = _slicedToArray(_useState11, 2),\n      isVegetarian = _useState12[0],\n      setIsVegetarian = _useState12[1];\n\n  var _useState13 = useState(false),\n      _useState14 = _slicedToArray(_useState13, 2),\n      isDesayuno = _useState14[0],\n      setIsDesayuno = _useState14[1];\n\n  var _useState15 = useState(false),\n      _useState16 = _slicedToArray(_useState15, 2),\n      isComida = _useState16[0],\n      setIsComida = _useState16[1];\n\n  var _useState17 = useState(false),\n      _useState18 = _slicedToArray(_useState17, 2),\n      isSnack = _useState18[0],\n      setIsSnack = _useState18[1];\n\n  var _useState19 = useState(false),\n      _useState20 = _slicedToArray(_useState19, 2),\n      isLonche = _useState20[0],\n      setIsLonche = _useState20[1];\n\n  var _useState21 = useState(false),\n      _useState22 = _slicedToArray(_useState21, 2),\n      isSandiwch = _useState22[0],\n      setIsSandiwch = _useState22[1];\n\n  var _useState23 = useState(false),\n      _useState24 = _slicedToArray(_useState23, 2),\n      isTaco = _useState24[0],\n      setIsTaco = _useState24[1];\n\n  var _useState25 = useState(false),\n      _useState26 = _slicedToArray(_useState25, 2),\n      isPan = _useState26[0],\n      setIsPan = _useState26[1];\n\n  var _useState27 = useState(false),\n      _useState28 = _slicedToArray(_useState27, 2),\n      isDulce = _useState28[0],\n      setIsDulce = _useState28[1];\n\n  var _useState29 = useState(),\n      _useState30 = _slicedToArray(_useState29, 2),\n      error = _useState30[0],\n      setError = _useState30[1];\n\n  var prodId = null;\n\n  if (props.route.params !== undefined) {\n    props.route.params.productId == undefined ? prodId = null : prodId = props.route.params.productId;\n  }\n\n  var editedProduct = useSelector(function (state) {\n    return state.products.availableProducts.find(function (prod) {\n      return prod.id === prodId;\n    });\n  });\n  useEffect(function () {\n    if (editedProduct != undefined && editedProduct != null) {\n      setIsAvailable(editedProduct.available == 1 ? true : false);\n      setIsGlutenFree(editedProduct.glutenfree == 1 ? true : false);\n      setIsLactoseFree(editedProduct.lactosefree == 1 ? true : false);\n      setIsVegan(editedProduct.vegan == 1 ? true : false);\n      setIsVegetarian(editedProduct.vegetarian == 1 ? true : false);\n      setIsDesayuno(editedProduct.desayuno == 1 ? true : false);\n      setIsComida(editedProduct.comida == 1 ? true : false);\n      setIsSnack(editedProduct.snack == 1 ? true : false);\n      setIsLonche(editedProduct.lonche == 1 ? true : false);\n      setIsTaco(editedProduct.taco == 1 ? true : false);\n      setIsPan(editedProduct.pan == 1 ? true : false);\n      setIsDulce(editedProduct.dulce == 1 ? true : false);\n      setIsSandiwch(editedProduct.sandiwch == 1 ? true : false);\n    }\n  }, [editedProduct]);\n  var dispatch = useDispatch();\n\n  var _useReducer = useReducer(formReducer, {\n    inputValues: {\n      title: editedProduct ? editedProduct.title : \"\",\n      imageurl: editedProduct ? editedProduct.imageurl : \"\",\n      description: editedProduct ? editedProduct.description_product : \"\",\n      price: editedProduct ? editedProduct.price : \"\",\n      ingredients: editedProduct ? editedProduct.ingredients : \"\"\n    },\n    inputValidities: {\n      title: editedProduct ? true : false,\n      imageurl: editedProduct ? true : false,\n      description: editedProduct ? true : false,\n      price: editedProduct ? true : false,\n      ingredients: editedProduct ? true : false\n    },\n    formIsValid: editedProduct ? true : false\n  }),\n      _useReducer2 = _slicedToArray(_useReducer, 2),\n      formState = _useReducer2[0],\n      dispatchFormState = _useReducer2[1];\n\n  useEffect(function () {\n    if (error) {\n      Alert.alert(\"An error occurred!\", error, [{\n        text: \"Okay\"\n      }]);\n    }\n  }, [error]);\n  var submitHandler = useCallback(function _callee() {\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (formState.formIsValid) {\n              _context.next = 3;\n              break;\n            }\n\n            Alert.alert(\"Wrong input!\", \"Please check the errors in the form.\", [{\n              text: \"Okay\"\n            }]);\n            return _context.abrupt(\"return\");\n\n          case 3:\n            setError(null);\n            setIsLoading(true);\n            _context.prev = 5;\n\n            if (!editedProduct) {\n              _context.next = 11;\n              break;\n            }\n\n            _context.next = 9;\n            return _regeneratorRuntime.awrap(dispatch(productsActions.updateProduct(formState.inputValues.title, formState.inputValues.description, formState.inputValues.imageurl, formState.inputValues.ingredients, +formState.inputValues.price, editedProduct.id, isAvailable, isVegetarian, isGlutenFree, isLactoseFree, isVegan, isDesayuno, isComida, isSnack, isLonche, isSandiwch, isTaco, isPan, isDulce)));\n\n          case 9:\n            _context.next = 13;\n            break;\n\n          case 11:\n            _context.next = 13;\n            return _regeneratorRuntime.awrap(dispatch(productsActions.createProduct(formState.inputValues.title, formState.inputValues.description, formState.inputValues.imageurl, formState.inputValues.ingredients, +formState.inputValues.price, isAvailable, isVegetarian, isGlutenFree, isLactoseFree, isVegan, isDesayuno, isComida, isSnack, isLonche, isSandiwch, isTaco, isPan, isDulce)));\n\n          case 13:\n            props.navigation.goBack();\n            _context.next = 19;\n            break;\n\n          case 16:\n            _context.prev = 16;\n            _context.t0 = _context[\"catch\"](5);\n            setError(_context.t0.message);\n\n          case 19:\n            setIsLoading(false);\n\n          case 20:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[5, 16]], Promise);\n  }, [dispatch, prodId, formState, isAvailable, isVegetarian, isGlutenFree, isLactoseFree, isVegan, isDesayuno, isComida, isSnack, isLonche, isSandiwch, isTaco, isPan, isDulce]);\n  useEffect(function () {\n    props.navigation.setParams({\n      FnSubmit: submitHandler\n    });\n  }, [submitHandler]);\n  var inputChangeHandler = useCallback(function (inputIdentifier, inputValue, inputValidity) {\n    dispatchFormState({\n      type: FORM_INPUT_UPDATE,\n      value: inputValue,\n      isValid: inputValidity,\n      input: inputIdentifier\n    });\n  }, [dispatchFormState]);\n\n  if (isLoading) {\n    return React.createElement(View, {\n      style: styles.centered,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 7\n      }\n    }, React.createElement(ActivityIndicator, {\n      size: \"large\",\n      color: Colors.primary,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 9\n      }\n    }));\n  }\n\n  return React.createElement(KeyboardAvoidingView, {\n    style: {\n      flex: 1\n    },\n    behavior: \"padding\",\n    keyboardVerticalOffset: 100,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 5\n    }\n  }, React.createElement(ScrollView, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 7\n    }\n  }, React.createElement(View, {\n    style: styles.form,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 9\n    }\n  }, React.createElement(Input, {\n    id: \"title\",\n    label: \"Titulo\",\n    errorText: \"Please enter a valid title!\",\n    keyboardType: \"default\",\n    autoCapitalize: \"sentences\",\n    autoCorrect: true,\n    returnKeyType: \"next\",\n    onInputChange: inputChangeHandler,\n    initialValue: editedProduct ? editedProduct.title : \"\",\n    initiallyValid: !!editedProduct,\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 11\n    }\n  }), React.createElement(ImagePicker, {\n    id: \"imageurl\",\n    label: \"Imagen\",\n    errorText: \"Please enter a valid image url!\",\n    onInputChange: inputChangeHandler,\n    initialValue: editedProduct ? editedProduct.imageurl : \"\",\n    value: formState.inputValues.imageurl,\n    initiallyValid: !!editedProduct,\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 11\n    }\n  }), React.createElement(Input, {\n    id: \"price\",\n    label: \"Precio\",\n    errorText: \"Please enter a valid price!\",\n    keyboardType: \"decimal-pad\",\n    returnKeyType: \"next\",\n    onInputChange: inputChangeHandler,\n    initialValue: editedProduct ? editedProduct.price : \"\",\n    initiallyValid: !!editedProduct,\n    required: true,\n    min: 0.1,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 11\n    }\n  }), React.createElement(Input, {\n    id: \"description\",\n    label: \"Descrpcion\",\n    errorText: \"Please enter a valid description!\",\n    keyboardType: \"default\",\n    autoCapitalize: \"sentences\",\n    autoCorrect: true,\n    multiline: true,\n    onInputChange: inputChangeHandler,\n    initialValue: editedProduct ? editedProduct.description_product : \"\",\n    initiallyValid: !!editedProduct,\n    minLength: 5,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 11\n    }\n  }), React.createElement(Input, {\n    id: \"ingredients\",\n    label: \"Ingredientes\",\n    errorText: \"Please enter a valid Ingredients!\",\n    keyboardType: \"default\",\n    autoCapitalize: \"sentences\",\n    autoCorrect: true,\n    multiline: true,\n    onInputChange: inputChangeHandler,\n    initialValue: editedProduct ? editedProduct.ingredients : \"\",\n    initiallyValid: !!editedProduct,\n    minLength: 5,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 11\n    }\n  }), React.createElement(Text, {\n    style: styles.description,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 11\n    }\n  }, \"Ingrediente, Ingrediente, Ingrediente\"), React.createElement(FilterSwitch, {\n    label: \"Se Encuentra Disponible\",\n    state: isAvailable,\n    onChange: function onChange(newValue) {\n      return setIsAvailable(newValue);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 322,\n      columnNumber: 11\n    }\n  }), React.createElement(View, {\n    style: styles.screen,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 328,\n      columnNumber: 11\n    }\n  }, React.createElement(Text, {\n    style: styles.title,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 13\n    }\n  }, \"TIPO DE COMIDA\"), React.createElement(FilterSwitch, {\n    label: \"Libre De Glutten\",\n    state: isGlutenFree,\n    onChange: function onChange(newValue) {\n      return setIsGlutenFree(newValue);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 330,\n      columnNumber: 13\n    }\n  }), React.createElement(FilterSwitch, {\n    label: \"Libre De Lactosa\",\n    state: isLactoseFree,\n    onChange: function onChange(newValue) {\n      return setIsLactoseFree(newValue);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 335,\n      columnNumber: 13\n    }\n  }), React.createElement(FilterSwitch, {\n    label: \"Es Vegano\",\n    state: isVegan,\n    onChange: function onChange(newValue) {\n      return setIsVegan(newValue);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 340,\n      columnNumber: 13\n    }\n  }), React.createElement(FilterSwitch, {\n    label: \"Es Vegetariano\",\n    state: isVegetarian,\n    onChange: function onChange(newValue) {\n      return setIsVegetarian(newValue);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 345,\n      columnNumber: 13\n    }\n  })), React.createElement(View, {\n    style: styles.screen,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 352,\n      columnNumber: 11\n    }\n  }, React.createElement(Text, {\n    style: styles.title,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 353,\n      columnNumber: 13\n    }\n  }, \"Categorias\"), React.createElement(FilterSwitch, {\n    label: \"Desayuno\",\n    state: isDesayuno,\n    onChange: function onChange(newValue) {\n      return setIsDesayuno(newValue);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 354,\n      columnNumber: 13\n    }\n  }), React.createElement(FilterSwitch, {\n    label: \"Comida\",\n    state: isComida,\n    onChange: function onChange(newValue) {\n      return setIsComida(newValue);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 359,\n      columnNumber: 13\n    }\n  }), React.createElement(FilterSwitch, {\n    label: \"Snack\",\n    state: isSnack,\n    onChange: function onChange(newValue) {\n      return setIsSnack(newValue);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 364,\n      columnNumber: 13\n    }\n  }), React.createElement(FilterSwitch, {\n    label: \"Lonche\",\n    state: isLonche,\n    onChange: function onChange(newValue) {\n      return setIsLonche(newValue);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 369,\n      columnNumber: 13\n    }\n  }), React.createElement(FilterSwitch, {\n    label: \"Sandiwch\",\n    state: isSandiwch,\n    onChange: function onChange(newValue) {\n      return setIsSandiwch(newValue);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 374,\n      columnNumber: 13\n    }\n  }), React.createElement(FilterSwitch, {\n    label: \"Taco\",\n    state: isTaco,\n    onChange: function onChange(newValue) {\n      return setIsTaco(newValue);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 379,\n      columnNumber: 13\n    }\n  }), React.createElement(FilterSwitch, {\n    label: \"Pan\",\n    state: isPan,\n    onChange: function onChange(newValue) {\n      return setIsPan(newValue);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 384,\n      columnNumber: 13\n    }\n  }), React.createElement(FilterSwitch, {\n    label: \"Dulce\",\n    state: isDulce,\n    onChange: function onChange(newValue) {\n      return setIsDulce(newValue);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 389,\n      columnNumber: 13\n    }\n  })))));\n};\n\nexport var screenOptions = function screenOptions(navData) {\n  var sb = navData.route.params !== undefined ? navData.route.params.FnSubmit : null;\n  return {\n    headerTitle: \"EDITAR O CREAR\",\n    headerRight: function headerRight() {\n      return React.createElement(HeaderButtons, {\n        HeaderButtonComponent: HeaderButton,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 407,\n          columnNumber: 7\n        }\n      }, React.createElement(Item, {\n        title: \"Save\",\n        iconName: Platform.OS === \"android\" ? \"md-checkmark\" : \"ios-checkmark\",\n        onPress: sb,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 408,\n          columnNumber: 9\n        }\n      }));\n    }\n  };\n};\nvar styles = StyleSheet.create({\n  title: {\n    fontSize: 15,\n    color: \"#871f78\"\n  },\n  description: {\n    fontFamily: \"open-sans-bold\",\n    fontSize: 9,\n    margin: 0,\n    padding: 0,\n    marginBottom: 5,\n    textAlign: \"center\",\n    color: \"#808284\"\n  },\n  filterContainer: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    width: \"80%\",\n    marginVertical: 15\n  },\n  form: {\n    margin: 20\n  },\n  centered: {\n    flex: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\"\n  },\n  container: {\n    flex: 1,\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  }\n});\nexport default EditProductScreen;","map":{"version":3,"sources":["/Users/valentin/Documents/Proyects/pruebas/ReactNative/CUCEIEats/TEAM-SELLER/screens/EditProduct.js"],"names":["React","useState","useEffect","useCallback","useReducer","HeaderButtons","Item","useSelector","useDispatch","ImagePicker","HeaderButton","productsActions","Input","Colors","FORM_INPUT_UPDATE","FilterSwitch","props","styles","filterContainer","label","true","primaryColor","Platform","OS","state","onChange","formReducer","action","type","updatedValues","inputValues","input","value","updatedValidities","inputValidities","isValid","updatedFormIsValid","key","formIsValid","EditProductScreen","isLoading","setIsLoading","isAvailable","setIsAvailable","isGlutenFree","setIsGlutenFree","isLactoseFree","setIsLactoseFree","isVegan","setIsVegan","isVegetarian","setIsVegetarian","isDesayuno","setIsDesayuno","isComida","setIsComida","isSnack","setIsSnack","isLonche","setIsLonche","isSandiwch","setIsSandiwch","isTaco","setIsTaco","isPan","setIsPan","isDulce","setIsDulce","error","setError","prodId","route","params","undefined","productId","editedProduct","products","availableProducts","find","prod","id","available","glutenfree","lactosefree","vegan","vegetarian","desayuno","comida","snack","lonche","taco","pan","dulce","sandiwch","dispatch","title","imageurl","description","description_product","price","ingredients","formState","dispatchFormState","Alert","alert","text","submitHandler","updateProduct","createProduct","navigation","goBack","message","setParams","FnSubmit","inputChangeHandler","inputIdentifier","inputValue","inputValidity","centered","primary","flex","form","newValue","screen","screenOptions","navData","sb","headerTitle","headerRight","StyleSheet","create","fontSize","color","fontFamily","margin","padding","marginBottom","textAlign","flexDirection","justifyContent","alignItems","width","marginVertical","container"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useCallback, useReducer } from \"react\";\nimport {\n  View,\n  ScrollView,\n  StyleSheet,\n  Platform,\n  Alert,\n  KeyboardAvoidingView,\n  ActivityIndicator,\n  CheckBox,\n  Text,\n  Switch,\n} from \"react-native\";\nimport { HeaderButtons, Item } from \"react-navigation-header-buttons\";\nimport { useSelector, useDispatch } from \"react-redux\";\n\nimport ImagePicker from \"../components/ImagePicker\";\n\nimport HeaderButton from \"../components/UI/HeaderButton\";\nimport * as productsActions from \"../store/actions/products\";\nimport Input from \"../components/UI/Input\";\nimport Colors from \"../constants/Colors\";\n\nconst FORM_INPUT_UPDATE = \"FORM_INPUT_UPDATE\";\n\nconst FilterSwitch = (props) => {\n  return (\n    <View style={styles.filterContainer}>\n      <Text>{props.label}</Text>\n      <Switch\n        trackColor={{ true: Colors.primaryColor }}\n        thumbColor={Platform.OS === \"android\" ? Colors.primaryColor : \"\"}\n        value={props.state}\n        onValueChange={props.onChange}\n      />\n    </View>\n  );\n};\n\nconst formReducer = (state, action) => {\n  if (action.type === FORM_INPUT_UPDATE) {\n    const updatedValues = {\n      ...state.inputValues,\n      [action.input]: action.value,\n    };\n    const updatedValidities = {\n      ...state.inputValidities,\n      [action.input]: action.isValid,\n    };\n    let updatedFormIsValid = true;\n    for (const key in updatedValidities) {\n      updatedFormIsValid = updatedFormIsValid && updatedValidities[key];\n    }\n    return {\n      formIsValid: updatedFormIsValid,\n      inputValidities: updatedValidities,\n      inputValues: updatedValues,\n    };\n  }\n  return state;\n};\n\nconst EditProductScreen = (props) => {\n  const [isLoading, setIsLoading] = useState(false);\n  const [isAvailable, setIsAvailable] = useState(true);\n\n  const [isGlutenFree, setIsGlutenFree] = useState(false);\n  const [isLactoseFree, setIsLactoseFree] = useState(false);\n  const [isVegan, setIsVegan] = useState(false);\n  const [isVegetarian, setIsVegetarian] = useState(false);\n\n  const [isDesayuno, setIsDesayuno] = useState(false);\n  const [isComida, setIsComida] = useState(false);\n  const [isSnack, setIsSnack] = useState(false);\n  const [isLonche, setIsLonche] = useState(false);\n  const [isSandiwch, setIsSandiwch] = useState(false);\n  const [isTaco, setIsTaco] = useState(false);\n  const [isPan, setIsPan] = useState(false);\n  const [isDulce, setIsDulce] = useState(false);\n\n  const [error, setError] = useState();\n  var prodId = null;\n  if (props.route.params !== undefined) {\n    props.route.params.productId == undefined\n      ? (prodId = null)\n      : (prodId = props.route.params.productId);\n  }\n\n  const editedProduct = useSelector((state) =>\n    state.products.availableProducts.find((prod) => prod.id === prodId)\n  );\n\n  useEffect(() => {\n    if (editedProduct != undefined && editedProduct != null) {\n      setIsAvailable(editedProduct.available == 1 ? true : false);\n      setIsGlutenFree(editedProduct.glutenfree == 1 ? true : false);\n      setIsLactoseFree(editedProduct.lactosefree == 1 ? true : false);\n      setIsVegan(editedProduct.vegan == 1 ? true : false);\n      setIsVegetarian(editedProduct.vegetarian == 1 ? true : false);\n\n      setIsDesayuno(editedProduct.desayuno == 1 ? true : false);\n      setIsComida(editedProduct.comida == 1 ? true : false);\n      setIsSnack(editedProduct.snack == 1 ? true : false);\n      setIsLonche(editedProduct.lonche == 1 ? true : false);\n      setIsTaco(editedProduct.taco == 1 ? true : false);\n      setIsPan(editedProduct.pan == 1 ? true : false);\n      setIsDulce(editedProduct.dulce == 1 ? true : false);\n      setIsSandiwch(editedProduct.sandiwch == 1 ? true : false);\n    }\n  }, [editedProduct]);\n\n  const dispatch = useDispatch();\n\n  const [formState, dispatchFormState] = useReducer(formReducer, {\n    inputValues: {\n      title: editedProduct ? editedProduct.title : \"\",\n      imageurl: editedProduct ? editedProduct.imageurl : \"\",\n      description: editedProduct ? editedProduct.description_product : \"\",\n      price: editedProduct ? editedProduct.price : \"\",\n      ingredients: editedProduct ? editedProduct.ingredients : \"\",\n    },\n    inputValidities: {\n      title: editedProduct ? true : false,\n      imageurl: editedProduct ? true : false,\n      description: editedProduct ? true : false,\n      price: editedProduct ? true : false,\n      ingredients: editedProduct ? true : false,\n    },\n    formIsValid: editedProduct ? true : false,\n  });\n\n  useEffect(() => {\n    if (error) {\n      Alert.alert(\"An error occurred!\", error, [{ text: \"Okay\" }]);\n    }\n  }, [error]);\n\n  const submitHandler = useCallback(async () => {\n    if (!formState.formIsValid) {\n      Alert.alert(\"Wrong input!\", \"Please check the errors in the form.\", [\n        { text: \"Okay\" },\n      ]);\n      return;\n    }\n    setError(null);\n    setIsLoading(true);\n\n    try {\n      if (editedProduct) {\n        await dispatch(\n          productsActions.updateProduct(\n            formState.inputValues.title,\n            formState.inputValues.description,\n            formState.inputValues.imageurl,\n            formState.inputValues.ingredients,\n            +formState.inputValues.price,\n            editedProduct.id,\n            isAvailable,\n            isVegetarian,\n            isGlutenFree,\n            isLactoseFree,\n            isVegan,\n            isDesayuno,\n            isComida,\n            isSnack,\n            isLonche,\n            isSandiwch,\n            isTaco,\n            isPan,\n            isDulce\n          )\n        );\n      } else {\n        await dispatch(\n          productsActions.createProduct(\n            formState.inputValues.title,\n            formState.inputValues.description,\n            formState.inputValues.imageurl,\n            formState.inputValues.ingredients,\n            +formState.inputValues.price,\n            isAvailable,\n            isVegetarian,\n            isGlutenFree,\n            isLactoseFree,\n            isVegan,\n            isDesayuno,\n            isComida,\n            isSnack,\n            isLonche,\n            isSandiwch,\n            isTaco,\n            isPan,\n            isDulce\n          )\n        );\n      }\n      props.navigation.goBack();\n    } catch (err) {\n      setError(err.message);\n    }\n\n    setIsLoading(false);\n  }, [\n    dispatch,\n    prodId,\n    formState,\n    isAvailable,\n    isVegetarian,\n    isGlutenFree,\n    isLactoseFree,\n    isVegan,\n    isDesayuno,\n    isComida,\n    isSnack,\n    isLonche,\n    isSandiwch,\n    isTaco,\n    isPan,\n    isDulce,\n  ]);\n\n  useEffect(() => {\n    props.navigation.setParams({ FnSubmit: submitHandler });\n  }, [submitHandler]);\n\n  const inputChangeHandler = useCallback(\n    (inputIdentifier, inputValue, inputValidity) => {\n      dispatchFormState({\n        type: FORM_INPUT_UPDATE,\n        value: inputValue,\n        isValid: inputValidity,\n        input: inputIdentifier,\n      });\n    },\n    [dispatchFormState]\n  );\n\n  if (isLoading) {\n    return (\n      <View style={styles.centered}>\n        <ActivityIndicator size=\"large\" color={Colors.primary} />\n      </View>\n    );\n  }\n  return (\n    <KeyboardAvoidingView\n      style={{ flex: 1 }}\n      behavior=\"padding\"\n      keyboardVerticalOffset={100}\n    >\n      <ScrollView>\n        <View style={styles.form}>\n          <Input\n            id=\"title\"\n            label=\"Titulo\"\n            errorText=\"Please enter a valid title!\"\n            keyboardType=\"default\"\n            autoCapitalize=\"sentences\"\n            autoCorrect\n            returnKeyType=\"next\"\n            onInputChange={inputChangeHandler}\n            initialValue={editedProduct ? editedProduct.title : \"\"}\n            initiallyValid={!!editedProduct}\n            required\n          />\n\n          <ImagePicker\n            id=\"imageurl\"\n            label=\"Imagen\"\n            errorText=\"Please enter a valid image url!\"\n            onInputChange={inputChangeHandler}\n            initialValue={editedProduct ? editedProduct.imageurl : \"\"}\n            value={formState.inputValues.imageurl}\n            initiallyValid={!!editedProduct}\n            required\n          />\n          <Input\n            id=\"price\"\n            label=\"Precio\"\n            errorText=\"Please enter a valid price!\"\n            keyboardType=\"decimal-pad\"\n            returnKeyType=\"next\"\n            onInputChange={inputChangeHandler}\n            initialValue={editedProduct ? editedProduct.price : \"\"}\n            initiallyValid={!!editedProduct}\n            required\n            min={0.1}\n          />\n\n          <Input\n            id=\"description\"\n            label=\"Descrpcion\"\n            errorText=\"Please enter a valid description!\"\n            keyboardType=\"default\"\n            autoCapitalize=\"sentences\"\n            autoCorrect\n            multiline\n            onInputChange={inputChangeHandler}\n            initialValue={\n              editedProduct ? editedProduct.description_product : \"\"\n            }\n            initiallyValid={!!editedProduct}\n            minLength={5}\n          />\n\n          <Input\n            id=\"ingredients\"\n            label=\"Ingredientes\"\n            errorText=\"Please enter a valid Ingredients!\"\n            keyboardType=\"default\"\n            autoCapitalize=\"sentences\"\n            autoCorrect\n            multiline\n            onInputChange={inputChangeHandler}\n            initialValue={editedProduct ? editedProduct.ingredients : \"\"}\n            initiallyValid={!!editedProduct}\n            minLength={5}\n          />\n          <Text style={styles.description}>\n            Ingrediente, Ingrediente, Ingrediente\n          </Text>\n          <FilterSwitch\n            label=\"Se Encuentra Disponible\"\n            state={isAvailable}\n            onChange={(newValue) => setIsAvailable(newValue)}\n          />\n\n          <View style={styles.screen}>\n            <Text style={styles.title}>TIPO DE COMIDA</Text>\n            <FilterSwitch\n              label=\"Libre De Glutten\"\n              state={isGlutenFree}\n              onChange={(newValue) => setIsGlutenFree(newValue)}\n            />\n            <FilterSwitch\n              label=\"Libre De Lactosa\"\n              state={isLactoseFree}\n              onChange={(newValue) => setIsLactoseFree(newValue)}\n            />\n            <FilterSwitch\n              label=\"Es Vegano\"\n              state={isVegan}\n              onChange={(newValue) => setIsVegan(newValue)}\n            />\n            <FilterSwitch\n              label=\"Es Vegetariano\"\n              state={isVegetarian}\n              onChange={(newValue) => setIsVegetarian(newValue)}\n            />\n          </View>\n\n          <View style={styles.screen}>\n            <Text style={styles.title}>Categorias</Text>\n            <FilterSwitch\n              label=\"Desayuno\"\n              state={isDesayuno}\n              onChange={(newValue) => setIsDesayuno(newValue)}\n            />\n            <FilterSwitch\n              label=\"Comida\"\n              state={isComida}\n              onChange={(newValue) => setIsComida(newValue)}\n            />\n            <FilterSwitch\n              label=\"Snack\"\n              state={isSnack}\n              onChange={(newValue) => setIsSnack(newValue)}\n            />\n            <FilterSwitch\n              label=\"Lonche\"\n              state={isLonche}\n              onChange={(newValue) => setIsLonche(newValue)}\n            />\n            <FilterSwitch\n              label=\"Sandiwch\"\n              state={isSandiwch}\n              onChange={(newValue) => setIsSandiwch(newValue)}\n            />\n            <FilterSwitch\n              label=\"Taco\"\n              state={isTaco}\n              onChange={(newValue) => setIsTaco(newValue)}\n            />\n            <FilterSwitch\n              label=\"Pan\"\n              state={isPan}\n              onChange={(newValue) => setIsPan(newValue)}\n            />\n            <FilterSwitch\n              label=\"Dulce\"\n              state={isDulce}\n              onChange={(newValue) => setIsDulce(newValue)}\n            />\n          </View>\n        </View>\n      </ScrollView>\n    </KeyboardAvoidingView>\n  );\n};\n\nexport const screenOptions = (navData) => {\n  const sb =\n    navData.route.params !== undefined ? navData.route.params.FnSubmit : null;\n  return {\n    headerTitle: \"EDITAR O CREAR\",\n    headerRight: () => (\n      <HeaderButtons HeaderButtonComponent={HeaderButton}>\n        <Item\n          title=\"Save\"\n          iconName={\n            Platform.OS === \"android\" ? \"md-checkmark\" : \"ios-checkmark\"\n          }\n          onPress={sb}\n        />\n      </HeaderButtons>\n    ),\n  };\n};\n\nconst styles = StyleSheet.create({\n  title: {\n    fontSize: 15,\n    color: \"#871f78\",\n  },\n  description: {\n    fontFamily: \"open-sans-bold\",\n    fontSize: 9,\n    margin: 0,\n    padding: 0,\n    marginBottom: 5,\n    textAlign: \"center\",\n    color: \"#808284\",\n  },\n  filterContainer: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    width: \"80%\",\n    marginVertical: 15,\n  },\n  form: {\n    margin: 20,\n  },\n  centered: {\n    flex: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n  container: {\n    flex: 1,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n});\n\nexport default EditProductScreen;\n"]},"metadata":{},"sourceType":"module"}