{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nvar _jsxFileName = \"/Users/valentin/Documents/Proyects/pruebas/ReactNative/CUCEIEats/TEAM-SELLER/screens/AuthScreen.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect, useReducer, useCallback } from \"react\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport View from \"react-native-web/dist/exports/View\";\nimport KeyboardAvoidingView from \"react-native-web/dist/exports/KeyboardAvoidingView\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport { LinearGradient } from \"expo-linear-gradient\";\nimport { useDispatch } from \"react-redux\";\nimport Input from \"../components/UI/Input\";\nimport Card from \"../components/UI/Card\";\nimport Colors from \"../constants/Colors\";\nimport * as authActions from \"../store/actions/auth\";\nvar FORM_INPUT_UPDATE = \"FORM_INPUT_UPDATE\";\n\nvar formReducer = function formReducer(state, action) {\n  if (action.type === FORM_INPUT_UPDATE) {\n    var updatedValues = _objectSpread(_objectSpread({}, state.inputValues), {}, _defineProperty({}, action.input, action.value));\n\n    var updatedValidities = _objectSpread(_objectSpread({}, state.inputValidities), {}, _defineProperty({}, action.input, action.isValid));\n\n    var updatedFormIsValid = true;\n\n    for (var key in updatedValidities) {\n      updatedFormIsValid = updatedFormIsValid && updatedValidities[key];\n    }\n\n    return {\n      formIsValid: updatedFormIsValid,\n      inputValidities: updatedValidities,\n      inputValues: updatedValues\n    };\n  }\n\n  return state;\n};\n\nvar AuthScreen = function AuthScreen(props) {\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isLoading = _useState2[0],\n      setIsLoading = _useState2[1];\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      error = _useState4[0],\n      setError = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      isSignup = _useState6[0],\n      setIsSignup = _useState6[1];\n\n  var dispatch = useDispatch();\n\n  var _useReducer = useReducer(formReducer, {\n    inputValues: {\n      email: \"\",\n      user_password: \"\",\n      firstname: \"\",\n      lastname: \"\",\n      code: \"\",\n      cellphone: \"\"\n    },\n    inputValidities: {\n      email: false,\n      user_password: false\n    },\n    formIsValid: false\n  }),\n      _useReducer2 = _slicedToArray(_useReducer, 2),\n      formState = _useReducer2[0],\n      dispatchFormState = _useReducer2[1];\n\n  useEffect(function () {\n    if (error) {\n      Alert.alert(\"Ocurrio Un Error\", error, [{\n        text: \"Okay\"\n      }]);\n    }\n  }, [error]);\n\n  var authHandler = function authHandler() {\n    var action;\n    return _regeneratorRuntime.async(function authHandler$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (isSignup) {\n              action = authActions.signup(formState.inputValues.email, formState.inputValues.user_password, formState.inputValues.firstname, formState.inputValues.lastname, formState.inputValues.code, formState.inputValues.cellphone);\n            } else {\n              action = authActions.login(formState.inputValues.email, formState.inputValues.user_password);\n            }\n\n            setError(null);\n            setIsLoading(true);\n            _context.prev = 3;\n            _context.next = 6;\n            return _regeneratorRuntime.awrap(dispatch(action));\n\n          case 6:\n            _context.next = 12;\n            break;\n\n          case 8:\n            _context.prev = 8;\n            _context.t0 = _context[\"catch\"](3);\n            setError(error);\n            setIsLoading(false);\n\n          case 12:\n            setIsLoading(false);\n\n          case 13:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[3, 8]], Promise);\n  };\n\n  var inputChangeHandler = useCallback(function (inputIdentifier, inputValue, inputValidity) {\n    dispatchFormState({\n      type: FORM_INPUT_UPDATE,\n      value: inputValue,\n      isValid: inputValidity,\n      input: inputIdentifier\n    });\n  }, [dispatchFormState]);\n  return React.createElement(KeyboardAvoidingView, {\n    behavior: \"padding\",\n    keyboardVerticalOffset: 50,\n    style: styles.screen,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 5\n    }\n  }, React.createElement(LinearGradient, {\n    colors: [\"#ffedff\", \"#ffe3ff\"],\n    style: styles.gradient,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }\n  }, React.createElement(Card, {\n    style: styles.authContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 9\n    }\n  }, React.createElement(ScrollView, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 11\n    }\n  }, isSignup ? React.createElement(View, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 15\n    }\n  }, React.createElement(Input, {\n    id: \"firstname\",\n    label: \"Nombre\",\n    keyboardType: \"default\",\n    required: true,\n    autoCapitalize: \"none\",\n    errorText: \"Porfavor ingrese Su Nombre\",\n    onInputChange: inputChangeHandler,\n    initialValue: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 17\n    }\n  }), React.createElement(Input, {\n    id: \"lastname\",\n    label: \"Apellido\",\n    keyboardType: \"default\",\n    required: true,\n    autoCapitalize: \"none\",\n    errorText: \"Porfavor ingrese Su Apellido\",\n    onInputChange: inputChangeHandler,\n    initialValue: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 17\n    }\n  }), React.createElement(Input, {\n    id: \"code\",\n    label: \"Codigo\",\n    keyboardType: \"default\",\n    required: true,\n    autoCapitalize: \"none\",\n    errorText: \"Porfavor ingrese Su Codigo\",\n    onInputChange: inputChangeHandler,\n    initialValue: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 17\n    }\n  }), React.createElement(Input, {\n    id: \"cellphone\",\n    label: \"Numero De Celular\",\n    keyboardType: \"phone-pad\",\n    required: true,\n    autoCapitalize: \"none\",\n    errorText: \"Porfavor ingrese Su Numero\",\n    onInputChange: inputChangeHandler,\n    initialValue: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 17\n    }\n  })) : React.createElement(View, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 15\n    }\n  }), React.createElement(Input, {\n    id: \"email\",\n    label: \"E-Mail\",\n    keyboardType: \"email-address\",\n    required: true,\n    email: true,\n    autoCapitalize: \"none\",\n    errorText: \"Please enter a valid email address.\",\n    onInputChange: inputChangeHandler,\n    initialValue: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 13\n    }\n  }), React.createElement(Input, {\n    id: \"user_password\",\n    label: \"Password\",\n    keyboardType: \"default\",\n    secureTextEntry: true,\n    required: true,\n    minLength: 5,\n    autoCapitalize: \"none\",\n    errorText: \"Please enter a valid password.\",\n    onInputChange: inputChangeHandler,\n    initialValue: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 13\n    }\n  }), React.createElement(View, {\n    style: styles.buttonContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 13\n    }\n  }, isLoading ? React.createElement(ActivityIndicator, {\n    size: \"small\",\n    color: Colors.primary,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 17\n    }\n  }) : React.createElement(Button, {\n    title: isSignup ? \"Sign Up\" : \"Login\",\n    color: Colors.primary,\n    onPress: authHandler,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 17\n    }\n  })), React.createElement(View, {\n    style: styles.buttonContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 13\n    }\n  }, React.createElement(Button, {\n    title: \"Switch to \" + (isSignup ? \"Login\" : \"Sign Up\"),\n    color: Colors.accent,\n    onPress: function onPress() {\n      props.navigation.setOptions({\n        headerTitle: isSignup ? \"Login\" : \"Sign Up\"\n      });\n      setIsSignup(function (prevState) {\n        return !prevState;\n      });\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 15\n    }\n  }))))));\n};\n\nexport var screenOptions = {\n  headerTitle: \"UDG\"\n};\nvar styles = StyleSheet.create({\n  screen: {\n    flex: 1\n  },\n  gradient: {\n    flex: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\"\n  },\n  authContainer: {\n    width: \"80%\",\n    maxWidth: 400,\n    maxHeight: 600,\n    padding: 20\n  },\n  buttonContainer: {\n    marginTop: 10\n  }\n});\nexport default AuthScreen;","map":{"version":3,"sources":["/Users/valentin/Documents/Proyects/pruebas/ReactNative/CUCEIEats/TEAM-SELLER/screens/AuthScreen.js"],"names":["React","useState","useEffect","useReducer","useCallback","LinearGradient","useDispatch","Input","Card","Colors","authActions","FORM_INPUT_UPDATE","formReducer","state","action","type","updatedValues","inputValues","input","value","updatedValidities","inputValidities","isValid","updatedFormIsValid","key","formIsValid","AuthScreen","props","isLoading","setIsLoading","error","setError","isSignup","setIsSignup","dispatch","email","user_password","firstname","lastname","code","cellphone","formState","dispatchFormState","Alert","alert","text","authHandler","signup","login","inputChangeHandler","inputIdentifier","inputValue","inputValidity","styles","screen","gradient","authContainer","buttonContainer","primary","accent","navigation","setOptions","headerTitle","prevState","screenOptions","StyleSheet","create","flex","justifyContent","alignItems","width","maxWidth","maxHeight","padding","marginTop"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useReducer, useCallback } from \"react\";\nimport {\n  ScrollView,\n  View,\n  KeyboardAvoidingView,\n  StyleSheet,\n  Button,\n  ActivityIndicator,\n  Alert,\n  Text,\n} from \"react-native\";\nimport { LinearGradient } from \"expo-linear-gradient\";\nimport { useDispatch } from \"react-redux\";\n\nimport Input from \"../components/UI/Input\";\nimport Card from \"../components/UI/Card\";\nimport Colors from \"../constants/Colors\";\nimport * as authActions from \"../store/actions/auth\";\n\nconst FORM_INPUT_UPDATE = \"FORM_INPUT_UPDATE\";\n\nconst formReducer = (state, action) => {\n  if (action.type === FORM_INPUT_UPDATE) {\n    const updatedValues = {\n      ...state.inputValues,\n      [action.input]: action.value,\n    };\n    const updatedValidities = {\n      ...state.inputValidities,\n      [action.input]: action.isValid,\n    };\n    let updatedFormIsValid = true;\n    for (const key in updatedValidities) {\n      updatedFormIsValid = updatedFormIsValid && updatedValidities[key];\n    }\n    return {\n      formIsValid: updatedFormIsValid,\n      inputValidities: updatedValidities,\n      inputValues: updatedValues,\n    };\n  }\n  return state;\n};\n\nconst AuthScreen = (props) => {\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState();\n  const [isSignup, setIsSignup] = useState(false);\n  const dispatch = useDispatch();\n\n  const [formState, dispatchFormState] = useReducer(formReducer, {\n    inputValues: {\n      email: \"\",\n      user_password: \"\",\n      firstname: \"\",\n      lastname: \"\",\n      code: \"\",\n\n      cellphone: \"\",\n    },\n    inputValidities: {\n      email: false,\n      user_password: false,\n    },\n    formIsValid: false,\n  });\n\n  useEffect(() => {\n    if (error) {\n      Alert.alert(\"Ocurrio Un Error\", error, [{ text: \"Okay\" }]);\n    }\n  }, [error]);\n\n  const authHandler = async () => {\n    let action;\n\n    if (isSignup) {\n      action = authActions.signup(\n        formState.inputValues.email,\n        formState.inputValues.user_password,\n        formState.inputValues.firstname,\n        formState.inputValues.lastname,\n        formState.inputValues.code,\n\n        formState.inputValues.cellphone\n      );\n    } else {\n      action = authActions.login(\n        formState.inputValues.email,\n        formState.inputValues.user_password\n      );\n    }\n    setError(null);\n    setIsLoading(true);\n    try {\n      await dispatch(action);\n    } catch (err) {\n      setError(error);\n      setIsLoading(false);\n    }\n    setIsLoading(false);\n  };\n\n  const inputChangeHandler = useCallback(\n    (inputIdentifier, inputValue, inputValidity) => {\n      dispatchFormState({\n        type: FORM_INPUT_UPDATE,\n        value: inputValue,\n        isValid: inputValidity,\n        input: inputIdentifier,\n      });\n    },\n    [dispatchFormState]\n  );\n\n  return (\n    <KeyboardAvoidingView\n      behavior=\"padding\"\n      keyboardVerticalOffset={50}\n      style={styles.screen}\n    >\n      <LinearGradient colors={[\"#ffedff\", \"#ffe3ff\"]} style={styles.gradient}>\n        <Card style={styles.authContainer}>\n          <ScrollView>\n            {isSignup ? (\n              <View>\n                <Input\n                  id=\"firstname\"\n                  label=\"Nombre\"\n                  keyboardType=\"default\"\n                  required\n                  autoCapitalize=\"none\"\n                  errorText=\"Porfavor ingrese Su Nombre\"\n                  onInputChange={inputChangeHandler}\n                  initialValue=\"\"\n                />\n                <Input\n                  id=\"lastname\"\n                  label=\"Apellido\"\n                  keyboardType=\"default\"\n                  required\n                  autoCapitalize=\"none\"\n                  errorText=\"Porfavor ingrese Su Apellido\"\n                  onInputChange={inputChangeHandler}\n                  initialValue=\"\"\n                />\n                <Input\n                  id=\"code\"\n                  label=\"Codigo\"\n                  keyboardType=\"default\"\n                  required\n                  autoCapitalize=\"none\"\n                  errorText=\"Porfavor ingrese Su Codigo\"\n                  onInputChange={inputChangeHandler}\n                  initialValue=\"\"\n                />\n                {/* <Input\n                  id=\"image\"\n                  label=\"Image\"\n                  keyboardType=\"default\"\n                  required\n                  autoCapitalize=\"none\"\n                  errorText=\"Porfavor ingrese Su Imagen\"\n                  onInputChange={inputChangeHandler}\n                  initialValue=\"\"\n                /> */}\n                <Input\n                  id=\"cellphone\"\n                  label=\"Numero De Celular\"\n                  keyboardType=\"phone-pad\"\n                  required\n                  autoCapitalize=\"none\"\n                  errorText=\"Porfavor ingrese Su Numero\"\n                  onInputChange={inputChangeHandler}\n                  initialValue=\"\"\n                />\n              </View>\n            ) : (\n              <View></View>\n            )}\n            <Input\n              id=\"email\"\n              label=\"E-Mail\"\n              keyboardType=\"email-address\"\n              required\n              email\n              autoCapitalize=\"none\"\n              errorText=\"Please enter a valid email address.\"\n              onInputChange={inputChangeHandler}\n              initialValue=\"\"\n            />\n            <Input\n              id=\"user_password\"\n              label=\"Password\"\n              keyboardType=\"default\"\n              secureTextEntry\n              required\n              minLength={5}\n              autoCapitalize=\"none\"\n              errorText=\"Please enter a valid password.\"\n              onInputChange={inputChangeHandler}\n              initialValue=\"\"\n            />\n\n            <View style={styles.buttonContainer}>\n              {isLoading ? (\n                <ActivityIndicator size=\"small\" color={Colors.primary} />\n              ) : (\n                <Button\n                  title={isSignup ? \"Sign Up\" : \"Login\"}\n                  color={Colors.primary}\n                  onPress={authHandler}\n                />\n              )}\n            </View>\n            <View style={styles.buttonContainer}>\n              <Button\n                title={`Switch to ${isSignup ? \"Login\" : \"Sign Up\"}`}\n                color={Colors.accent}\n                onPress={() => {\n                  props.navigation.setOptions({\n                    headerTitle: isSignup ? \"Login\" : \"Sign Up\",\n                  });\n                  setIsSignup((prevState) => !prevState);\n                }}\n              />\n            </View>\n          </ScrollView>\n        </Card>\n      </LinearGradient>\n    </KeyboardAvoidingView>\n  );\n};\n\nexport const screenOptions = {\n  headerTitle: \"UDG\",\n};\n\nconst styles = StyleSheet.create({\n  screen: {\n    flex: 1,\n  },\n  gradient: {\n    flex: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n  authContainer: {\n    width: \"80%\",\n    maxWidth: 400,\n    maxHeight: 600,\n    padding: 20,\n  },\n  buttonContainer: {\n    marginTop: 10,\n  },\n});\n\nexport default AuthScreen;\n"]},"metadata":{},"sourceType":"module"}